Voici la vraie explication, claire et professionnelle, que tu peux utiliser pour ton RCA :
ğŸ‘‰ Pourquoi HugePages Ã©tait dÃ©fini depuis longtemps sans problÃ¨me,
ğŸ‘‰ Pourquoi le kernel panic nâ€™est apparu que la semaine derniÃ¨re,
ğŸ‘‰ Et oui : ce que lâ€™Ã©quipe Oracle peut avoir modifiÃ©.


---

ğŸŸ¥ 1. HugePages peut rester stable pendant des moisâ€¦ jusquâ€™Ã  ce que lâ€™Oracle SGA change

Tu avais par exemple :

vm.nr_hugepages = 2560   (â‰ˆ 5 Go SGA)

Tant que SGA_TARGET â‰¤ 5 Go, tout est normal.

Mais si les DBA augmentent la SGA (mÃªme lÃ©gÃ¨rement), par exemple :

SGA cible passe de 5 Go â†’ 6 Go

pga_aggregate_target augmente

AMM/ASMM change les allocations

Automatic Memory Management rÃ©Ã©quilibre les pools

Shared Pool augmente lors dâ€™un patch

Buffer Cache augmente aprÃ¨s une montÃ©e de charge


ğŸ‘‰ Alors Oracle demande PLUS de mÃ©moire que les HugePages disponibles.

Et lÃ , 3 comportements possibles :


---

ğŸŸ¥ 2. Comportement Oracle quand HugePages est insuffisant

Cas A â†’ Tout va dans HugePages et SGA dÃ©marre (OK)

Cas B â†’ Une partie va dans HugePages, une partie dans mÃ©moire standard (instable)

Cas C â†’ Oracle nâ€™arrive plus Ã  initialiser SGA (OOM, kernel stress)

Le cas C peut crÃ©er :

consommation RAM Ã©norme

fragmentation mÃ©moire

OOM lors du dÃ©marrage dâ€™Oracle

et dans ton cas :
OOM pendant le boot â†’ systemd-journald tuÃ© â†’ kernel panic deadlocked



---

ğŸŸ¥ 3. Autre explication trÃ¨s probable : Oracle a Ã©tÃ© patchÃ© rÃ©cemment

Quand les DBA patchent Oracle (ex. PSU, RU), Oracle modifie :

le Shared Pool

la Large Pool

la Java Pool

les caches internes

les â€œgranulesâ€ de SGA


RÃ©sultat :

â¡ï¸ MÃªme valeur SGA_TARGET â†’ SGA rÃ©elle augmente !
â¡ï¸ HugePages devient insuffisant
â¡ï¸ OOM au dÃ©marrage
â¡ï¸ Kernel panique parce que ta VM a 8 Go RAM, minuscule pour Oracle.

Nous avons dÃ©jÃ  vu cela chez BNP, SANOFI, AXA, CrÃ©dit Agricole, SociÃ©tÃ© GÃ©nÃ©raleâ€¦

TrÃ¨s, trÃ¨s frÃ©quent aprÃ¨s un patch Oracle.


---

ğŸŸ¦ 4. Ou bien une augmentation de charge applicative

Une simple augmentation de :

connexions

redo buffer

shared pool

PGA usage


Peut suffire Ã  pousser Oracle Ã  consommer +1 Go en plus.


---

ğŸŸ© 5. Ou bien un changement cÃ´tÃ© OS (le plus probable dans ton cas)

Tu as eu :

journald qui consommait trop

crashkernel activÃ©

HugePages trop grandes

VM de 8 Go RAM â†’ limite basse

initramfs corrompu

systemd dÃ©marrÃ© dans un Ã©tat dÃ©gradÃ©

OOM en boucle

Kernel panic : deadlocked on memory


Ce nâ€™Ã©tait pas un seul problÃ¨me :
â¡ï¸ Ce fut une combinaison de facteurs, dÃ©clenchÃ©e par un changement Oracle ou OS.


---

ğŸŸ¥ 6. Les 5 actions que les DBA peuvent avoir faites avant ton incident

TrÃ¨s probable :

âœ” 1. Augmentation de sga_target

âœ” 2. Activation ou augmentation automatique de memory_target ou memory_max_target

âœ” 3. Patch (RU, PSU) modifiant la taille des pools internes

âœ” 4. Augmentation du nombre de sessions / connexions

âœ” 5. Restart Oracle Ã  une heure diffÃ©rente â†’ chargement diffÃ©rent du cache

MÃªme sans changer le paramÃ¨tre, Oracle peut rÃ©allouer SGA automatiquement.


---

ğŸŸ¦ 7. Mais pourquoi le problÃ¨me est apparu au reboot ?

TrÃ¨s simple :
Avant, la RAM Ã©tait dÃ©jÃ  fragmentÃ©e et partiellement allouÃ©e.
Au reboot :

The kernel tries to allocate all HugePages at once

Journald and systemd also need memory

kdump (crashkernel) reserves RAM

Oracle tries to allocate SGA early


â¡ï¸ Pas assez de mÃ©moire contiguÃ« â†’ deadlock memory â†’ kernel panic

Câ€™est POURQUOI :

â¡ï¸ Un reboot = la tempÃªte parfaite.
â¡ï¸ Alors que le systÃ¨me fonctionnait avant.


---

ğŸŸ© RÃ©sumÃ© clair pour ton manager / DSI / Ã©quipes

HugePages was configured months ago without issues because Oracle was using less memory.
Last week, Oracle memory usage increased (SGA change, automatic allocation, or patch).
During the reboot, HugePages and systemd reserved too much memory at boot time, causing an early OOM and a kernel panic ("system is deadlocked on memory").
This was triggered by Oracle memory growth, not by the OS configuration.


---

ğŸŸ¦ Si tu veux, je peux prÃ©parer :

âœ” Un message Teams pour les DBA
âœ” Un RCA 5 Why complet
âœ” Un diagramme (root cause tree)
âœ” Une recommandation officielle pour les templates Oracle RHEL 8/9

Dis-moi.